<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>board-sql.xml</comment>

	
	<entry key="getListCount">
      SELECT COUNT(*) FROM BOARD
      WHERE BOARD_CD = ?
      AND BOARD_ST = 'N'
    </entry>
	
	<entry key="getListCount1">
		SELECT COUNT(*) FROM MEMBER
		WHERE SECESSION_FL = 'N'
	</entry>
	
	<entry key="selectMemberList">
	SELECT * FROM (
		    SELECT  ROWNUM RNUM, A.* FROM (
		        SELECT MEMBER_NO, MEMBER_ID, MEMBER_NICKNAME, MEMBER_EMAIL, MEMBER_PHONE,
		                    TO_CHAR(ENROLL_DT, 'YYYY-MM-DD') AS ENROLL_DT, 
		                    SECESSION_FL
		        FROM MEMBER
		        WHERE SECESSION_FL = 'N'
		        ORDER BY MEMBER_NO DESC
		    ) A
		)
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<entry key="selectBoardName">
		SELECT BOARD_NM FROM BOARD_TYPE WHERE BOARD_CD = ? 
	</entry>
	
	
	<!-- 특정 게시판에서 일정한 범위의 목록조회 -->
	<entry key="selectBoardList">
		SELECT * FROM(SELECT ROWNUM RNUM, A.* FROM(SELECT BOARD_NO, BOARD_TITLE,
		 	MEMBER_NICKNAME,TO_CHAR(CREATE_DT, 'YYYY-MM-DD')AS CREATE_DT,READ_COUNT 
		 FROM BOARD JOIN MEMBER USING(MEMBER_NO)
			 WHERE BOARD_CD = ?
		 	AND BOARD_ST = 'N'ORDER BY BOARD_NO DESC
		 	) A)
		 	WHERE RNUM BETWEEN ? AND ? 
	 </entry>
	 
	 <!-- 회원목록에서 조건을 만족하는 회원 리스트 조회 -->
	 <entry key="searchMemberList1">
	 	SELECT * FROM (
		    SELECT  ROWNUM RNUM, A.* FROM (
		        SELECT MEMBER_NO, MEMBER_ID, MEMBER_NICKNAME, MEMBER_EMAIL, MEMBER_PHONE,
		                    TO_CHAR(ENROLL_DT, 'YYYY-MM-DD') AS ENROLL_DT, 
		                    SECESSION_FL
		        FROM MEMBER
		        WHERE SECESSION_FL = 'N'
	 </entry>
	 
	 <entry key="searchMemberList2">
	 	ORDER BY MEMBER_NO DESC
		    ) A
		)
		WHERE RNUM BETWEEN ? AND ?
	 </entry>
	 
	 <entry key="selectBoardDetail">
	 SELECT BOARD_NO, BOARD_TITLE, BOARD_CONTENT,TO_CHAR(CREATE_DT, 'YYYY"년" MM"월" DD"일" HH24:MI:SS') CREATE_DT,
	 TO_CHAR(UPDATE_DT, 'YYYY"년" MM"월" DD"일" HH24:MI:SS') UPDATE_DT,READ_COUNT, MEMBER_NICKNAME, MEMBER_PROFILE, 
	 MEMBER_NO, BOARD_CD 
	 FROM BOARD 
	 JOIN MEMBER USING(MEMBER_NO) 
	 JOIN BOARD_TYPE USING(BOARD_CD) 
	 WHERE BOARD_NO = ? AND BOARD_ST = 'N' 
	 </entry>
	 
	<!-- 게시글 삭제 -->
	<entry key="deleteBoard">
		UPDATE BOARD SET BOARD_ST = 'Y' WHERE BOARD_NO = ?
	</entry>

	<!-- 다음 게시글 번호 조회  -->
	<entry key="nextBoardNo">
		SELECT SEQ_BOARD_NO.NEXTVAL FROM DUAL
	</entry>
	 
	<!-- 게시글 삽입 -->
	<entry key="insertBoard">
		INSERT INTO BOARD
		VALUES(?, ?, ?, DEFAULT, DEFAULT, DEFAULT, DEFAULT, ?, ?)
	</entry> 
	 
	<!-- 게시글 수정 -->
	<entry key="updateBoard">
		UPDATE BOARD SET BOARD_TITLE = ?, BOARD_CONTENT = ?, UPDATE_DT = SYSDATE
		WHERE BOARD_NO =?
	</entry> 
	 
	 
	 
	
</properties>
